import{u as q,o as p,c as h,a as t,t as $,b,F as V,r as j,n as F,d as R,e as A,f as M,g as N,w as E,h as O,i as G,v as K,j as Q,k as J,l as U,m as X,p as H,q as B,s as Y,x as Z}from"./vendor-5fd4a9ff.js";(function(){const g=document.createElement("link").relList;if(g&&g.supports&&g.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const n of o)if(n.type==="childList")for(const u of n.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&i(u)}).observe(document,{childList:!0,subtree:!0});function m(o){const n={};return o.integrity&&(n.integrity=o.integrity),o.referrerpolicy&&(n.referrerPolicy=o.referrerpolicy),o.crossorigin==="use-credentials"?n.credentials="include":o.crossorigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function i(o){if(o.ep)return;o.ep=!0;const n=m(o);fetch(o.href,n)}})();const ee={key:0,class:"mt-3"},te=t("span",{class:"rounded px-1 py-0.5 border text-xs font-bold bg-yellow-400 border-yellow-400 text-gray-800"},"Ad",-1),se=t("span",{class:"px-1 font-bold"}," ·",-1),oe=["href"],ae={__name:"Ad",setup(c){const g=localStorage.getItem("api_key");return(m,i)=>!q(g)&&m.$window.show_ads?(p(),h("div",ee,[te,se,t("a",{href:m.$window.promot_link,target:"_blank",class:"text-green-700 hover:text-green-600 transition"},$(m.$window.promot_text),9,oe)])):b("",!0)}},re={class:"my-4 px-4 sm:px-6"},ne={class:"bg-white dark:bg-gray-900"},le={key:0,class:"border dark:border-gray-900 rounded-md"},ce={key:0,class:"flex flex-row py-4 px-4 sm:px-8 font-semibold text-gray-700 dark:text-gray-300 bg-neutral-100 dark:bg-gray-900"},ie=t("span",{class:"pr-4 flex-grow-0 flex-shrink-0 w-10 sm:w-12"},"ME:",-1),de={class:"flex-grow-1 dark:text-gray-300"},ue={key:1,class:"px-4 sm:px-8 py-4 flex flex-row text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-800"},me=t("span",{class:"font-semibold pr-4 flex-grow-0 flex-shrink-0 w-10 sm:w-12"},"AI:",-1),pe={clas:"flex-grow-1 whitespace-pre-wrap",style:{"white-space":"pre-wrap"}},he={key:0},ge={key:1},fe={key:2},xe={key:3,class:"blink"},ve={key:1,class:"py-24"},ye=t("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1280",height:"314.982",viewBox:"0 0 338.667 83.339","xmlns:v":"https://vecta.io/nano",class:"w-40 mx-auto h-24"},[t("path",{d:"M200.154 32.427v.028c-.169 0-.339.028-.508.028s-.339-.028-.508-.028c-10.075 0-16.312 6.294-16.312 16.397v4.967c0 9.736 6.322 15.776 16.453 15.776a4.38 4.38 0 0 0 .621-.028c.141 0 .254.028.395.028 6.801 0 11.543-2.483 14.562-7.62l-6.011-3.472c-2.004 2.963-4.685 5.193-8.523 5.193-5.136 0-8.212-3.161-8.212-8.495V53.79h23.819v-5.87c0-9.426-6.18-15.494-15.776-15.494zm-.508 5.786c4.685.226 7.507 3.33 7.507 8.438v1.411h-15.07v-.819c0-5.644 2.681-8.805 7.563-9.031zm-36.998-5.758c-4.487 0-8.353 1.863-10.385 4.967l-.508.79v-4.911h-8.523v47.667h8.946v-16.65l.508.762c1.919 2.85 5.673 4.543 10.047 4.543h.226.197c7.366 0 14.788-4.798 14.788-15.55v-6.039c0-7.733-4.572-15.55-14.845-15.55l-.056-.028h-.197zm-2.088 6.717c5.193.085 8.41 3.612 8.41 9.257v5.192c0 5.644-3.246 9.144-8.495 9.257-4.882-.085-8.297-3.81-8.297-9.116v-5.334c0-5.362 3.443-9.144 8.382-9.257zm115.934-18.485l-17.215 48.09h9.68l3.302-10.301h18.795v.113l3.302 10.216h9.68l-17.243-48.09h-1.016l-.028-.028zm5.137 8.269l7.196 22.719h-14.45zm57.035-1.496v-6.773h-29.52v6.773h10.357v34.487h-10.357v6.773h29.52v-6.773h-10.357V27.46zm-97.139 4.996h-.254-.141c-4.995 0-8.551 1.693-10.301 4.939l-.536.988v-5.08h-8.523v35.446h8.946v-21.11c0-4.967 2.681-7.817 7.309-7.902 4.431.085 6.971 2.879 6.971 7.705v21.307h8.946V45.917c0-8.438-4.628-13.462-12.389-13.462zM114.473 19.699c-13.18 0-21.392 8.213-21.392 21.449v7.14c0 13.236 8.184 21.448 21.392 21.448h.198.197c13.18 0 21.392-8.212 21.392-21.448v-7.14c0-13.236-8.212-21.449-21.392-21.449h-.197zm.198 7.169c7.846.085 12.361 5.108 12.361 13.8v8.128c0 8.692-4.515 13.716-12.361 13.8-7.846-.085-12.362-5.108-12.362-13.8v-8.128c0-8.692 4.516-13.716 12.362-13.8zM36.751.001c-9.116 0-17.215 5.87-20.038 14.534A20.83 20.83 0 0 0 2.828 24.61C-1.744 32.512-.7 42.446 5.425 49.219 3.534 54.892 4.183 61.1 7.203 66.237c4.544 7.93 13.687 11.994 22.634 10.103a20.78 20.78 0 0 0 15.635 6.999c9.116 0 17.215-5.87 20.038-14.534 5.87-1.214 10.922-4.883 13.857-10.075 4.6-7.902 3.556-17.836-2.568-24.609v-.028a20.76 20.76 0 0 0-1.778-17.046C70.476 9.145 61.332 5.08 52.414 6.971A20.86 20.86 0 0 0 36.751.001zm0 5.419l-.028.028c3.669 0 7.197 1.27 10.019 3.613-.113.056-.339.197-.508.282L29.64 18.91c-.847.48-1.355 1.383-1.355 2.371v22.464l-7.14-4.12v-18.57A15.63 15.63 0 0 1 36.751 5.419zm19.99 6.54a15.62 15.62 0 0 1 13.566 7.825c1.806 3.161 2.483 6.858 1.862 10.442-.113-.085-.338-.197-.48-.282l-16.594-9.596a2.78 2.78 0 0 0-2.737 0L32.913 31.581V23.34l16.058-9.285a15.54 15.54 0 0 1 7.77-2.096zm-41.043 8.53v19.727c0 .988.508 1.863 1.355 2.371l19.416 11.204L29.3 57.94l-16.03-9.257a15.63 15.63 0 0 1-5.7-21.336 15.65 15.65 0 0 1 8.128-6.858zm37.196 4.882l16.058 9.257c7.479 4.318 10.018 13.857 5.7 21.336l.028.028c-1.834 3.161-4.713 5.588-8.128 6.83V43.095c0-.988-.508-1.891-1.355-2.37L45.753 29.492zm-11.797 6.802l8.185 4.741v9.454l-8.185 4.741-8.184-4.741v-9.454zm12.869 7.451l7.14 4.12v18.542c0 8.636-6.999 15.635-15.606 15.635v-.028c-3.641 0-7.197-1.27-9.991-3.612.113-.056.367-.198.508-.283l16.594-9.567c.847-.48 1.383-1.383 1.354-2.371zM49.309 51.76V60l-16.058 9.257c-7.479 4.29-17.018 1.75-21.336-5.701h.028c-1.834-3.133-2.484-6.858-1.863-10.442.113.085.339.197.48.282l16.594 9.596a2.78 2.78 0 0 0 2.737 0z"})],-1),we=t("div",{class:"text-center text-gray-500 px-12"},"基于 OpenAI 的 ChatGPT 自然语言模型人工智能对话",-1),ke=[ye,we],_e={__name:"Dialogs",props:{messages:Array,loading:Boolean},setup(c){return(g,m)=>(p(),h("section",re,[t("div",ne,[c.messages.length?(p(),h("div",le,[(p(!0),h(V,null,j(c.messages,(i,o)=>(p(),h("div",{class:F(["dark:border-gray-900",o===c.messages.length-1?"":"border-b"]),key:o},[i.who==="ME"?(p(),h("div",ce,[ie,t("span",de,$(i.message.trim()),1)])):b("",!0),i.who==="AI"?(p(),h("div",ue,[me,t("div",pe,[t("div",null,[o!==c.messages.length-1&&i.message.trim().length===0?(p(),h("span",he," AI 也不知道该说啥了，祝你平安吧~ ")):b("",!0),!c.loading&&o===c.messages.length-1&&i.message.trim().length===0?(p(),h("span",ge," AI 也不知道该说啥了，祝你平安吧~ ")):(p(),h("span",fe,$(i.message.trim()),1)),c.loading&&o===c.messages.length-1?(p(),h("span",xe)):(p(),R(ae,{key:4}))])])])):b("",!0)],2))),128))])):(p(),h("div",ve,ke))])]))}},be={class:"relative py-20 sm:py-24 bg-white dark:bg-gray-800"},We={class:"max-w-5xl mx-auto"},Ce=["onSubmit"],Ie=t("button",{type:"submit",class:"mx-2 sm:mx-4 px-3 py-2 text-sm font-medium tracking-wide text-white capitalize transition-colors duration-300 transform bg-blue-700 rounded-md hover:bg-blue-600 focus:outline-none focus:bg-blue-600 whitespace-nowrap"}," 设置 ",-1),Se={key:0,class:"text-gray-500 px-4 sm:px-6 pt-1 flex flex-row items-center text-sm dark:text-gray-400"},$e={class:"pl-1 sm:pl-2"},Ae=t("span",null,"总：",-1),ze={class:"ml-3"},Oe=t("span",null,"已用：",-1),Le={class:"ml-3"},Me=t("span",null,"剩余：",-1),Be={key:1,class:"text-gray-500 px-4 sm:px-6 pt-1 flex flex-row items-center text-sm dark:text-gray-400"},De=t("span",null,"不需要填key也可使用",-1),Pe={key:0},Te={key:1},qe={key:2},Ve={class:"fixed bottom-0 left-0 right-0 py-3 bg-gray-100 border-t flex items-center justify-center dark:bg-gray-800 dark:border-t-gray-900"},je=["onSubmit"],Fe=["onClick"],Re=t("svg",{height:"800px",width:"800px",version:"1.1",id:"Layer_1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 482.827 482.827","xml:space":"preserve",class:"w-4 h-4"},[t("path",{d:`M241.413,0C171.855,0,106.16,30.011,60.606,81.465v-81.1H40.913v119.433h119.433v-19.692H70.671
			c41.954-50.628,104.403-80.413,170.743-80.413c122.26,0,221.721,99.462,221.721,221.721s-99.462,221.721-221.721,221.721
			S19.692,363.673,19.692,241.413c0-18.471,2.279-36.851,6.779-54.625l-19.096-4.827C2.481,201.313,0,221.317,0,241.413
			c0,133.115,108.298,241.413,241.413,241.413s241.413-108.298,241.413-241.413S374.529,0,241.413,0z`})],-1),Ne=[Re],Ee=["value"],Ge=t("button",{class:"px-4 py-2 text-sm font-medium tracking-wide text-white capitalize transition-colors duration-300 transform bg-blue-700 rounded-md hover:bg-blue-600 focus:outline-none focus:bg-blue-600 whitespace-nowrap",type:"submit"}," 发送 ",-1),Ke={__name:"App",setup(c){const g=A(null),{proxy:m}=H(),i=M([]),o=A(!1),n=A(""),u=A(""),l=M({total_available:0,total_granted:0,total_used:0}),v=A(!1),y=()=>{location.reload()},w=async()=>{const s=await U({url:"https://api.openai.com/dashboard/billing/credit_grants",headers:{"Content-Type":"application/json",Authorization:`Bearer ${u.value}`}}).then(a=>a.data);l.total_available=parseFloat(s.total_available).toFixed(2),l.total_used=parseFloat(s.total_used).toFixed(2),l.total_granted=parseFloat(s.total_granted).toFixed(2)},f=()=>{u.value?(localStorage.setItem("api_key",u.value),w()):(localStorage.removeItem("api_key"),l.total_available=0,l.total_used=0,l.total_granted=0)};N(()=>{const s=localStorage.getItem("api_key"),a=localStorage.getItem("dark_mode");a&&(o.value=a==="true"),s&&(u.value=s,w())});const x=()=>{if(v.value)return;const s=+localStorage.getItem("last_call");if(!u.value&&s&&rate_limit&&Date.now()-+s<rate_limit*1e3){m.$toast.show("你的请求频率太快了，请稍等。使用自己的APIKey无频率限制。",{type:"warning",maxToasts:1,duration:6e3});return}v.value=!0,i.push({who:"ME",message:n.value},{who:"AI",message:""}),X(()=>{g.value.scrollIntoView({smooth:!0})});const a=i.filter(e=>!!e.message).map(e=>`${e.who.toUpperCase()}: ${e.message.trim()}`).join(`
`).concat(`
AI: `);fetch("https://api.openai.com/v1/completions",{method:"POST",body:JSON.stringify({model:"text-davinci-003",max_tokens:512,top_p:1,best_of:1,temperature:.7,frequency_penalty:0,presence_penalty:0,prompt:a,stop:["ME:","AI:"],stream:!0}),headers:{"Content-Type":"application/json",Authorization:`Bearer ${u.value||my_api_key}`}}).then(e=>{if(e.status===200)return e.body;throw e}).then(e=>{const d=e.getReader();return new ReadableStream({start(k){function _(){d.read().then(({done:r,value:W})=>{if(r){console.log("done",r),k.close();return}k.enqueue(W);const C=new TextDecoder().decode(W);try{const z=C.match(/data:\s/g),P=C.split("data:").filter(I=>!!I.trim()&&I.trim()!=="[DONE]").map(I=>JSON.parse(I)).map(I=>I.choices[0].text).join(""),T=i[i.length-1];T.message+=P,g.value.scrollIntoView({smooth:!0})}catch(z){console.error(z)}_()})}_()}})}).then(e=>new Response(e,{headers:{"Content-Type":"text/html"}}).text()).then(e=>{v.value=!1,localStorage.setItem("last_call",Date.now())}).catch(e=>{console.log(e);const d=i[i.length-1];switch(e.status){case 401:{d.message="错误的 API KEY";break}case 403:{d.message="无权访问";break}case 404:{d.message="未找到";break}case 429:{d.message="达到请求次数限制，请歇一会";break}default:{console.log(e),d.message="出错了 "+e.message;break}}v.value=!1,localStorage.setItem("last_call",Date.now())}),n.value=""};return E(o,s=>{localStorage.setItem("dark_mode",s),s?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")}),(s,a)=>(p(),h("div",null,[t("div",be,[t("div",We,[t("form",{class:"px-4 sm:px-6 flex flex-row items-center justify-between",onSubmit:O(f,["prevent"])},[G(t("input",{type:"text",placeholder:"sk-xxx","onUpdate:modelValue":a[0]||(a[0]=e=>u.value=e),class:"px-3 py-2 text-gray-700 bg-white border rounded-md dark:bg-gray-900 dark:text-gray-300 dark:border-gray-600 focus:border-blue-400 dark:focus:border-blue-300 focus:outline-none focus:ring focus:ring-blue-300 focus:ring-opacity-40 flex-grow",onBlur:f},null,544),[[K,u.value]]),Ie,t("button",{class:"px-3 py-2 text-sm font-medium tracking-wide text-white capitalize transition-colors duration-300 transform bg-blue-700 rounded-md hover:bg-blue-600 focus:outline-none focus:bg-blue-600 whitespace-nowrap",onClick:w}," 查询 ")],40,Ce),u.value&&l.total_granted?(p(),h("div",Se,[t("div",$e,[Ae,t("span",null,"$"+$(l.total_granted),1)]),t("div",ze,[Oe,t("span",null,"$"+$(l.total_used),1)]),t("div",Le,[Me,t("span",null,"$"+$(l.total_available),1)])])):b("",!0),!u.value&&s.$window.my_api_key?(p(),h("div",Be,[De,s.$window.show_ads||s.$window.rate_limit?(p(),h("span",Pe,"，但")):b("",!0),s.$window.rate_limit?(p(),h("span",Te,"请求频率受限")):b("",!0),s.$window.show_ads?(p(),h("span",qe,"有广告")):b("",!0),Q("。 ")])):b("",!0),J(_e,{messages:i,loading:v.value},null,8,["messages","loading"]),t("div",{ref_key:"placeholder",ref:g},null,512),t("div",Ve,[t("form",{onSubmit:O(x,["prevent"]),class:"flex-grow flex flex-row justify-center items-center max-w-5xl pl-2 pr-4 sm:pl-4 sm:pr-6"},[t("button",{type:"button",class:"pl-2 pr-3 py-2 text-sm font-medium tracking-wide text-gray-500 dark:text-gray-300 focus:outline-none whitespace-nowrap",onClick:O(y,["prevent"])},Ne,8,Fe),t("input",{type:"text",class:"px-4 py-2 text-gray-700 bg-white border rounded-md mr-2 sm:mr-4 dark:bg-gray-900 dark:text-gray-300 dark:border-gray-600 focus:border-blue-400 dark:focus:border-blue-300 focus:outline-none focus:ring focus:ring-blue-300 focus:ring-opacity-40 flex-grow",placeholder:"请输入",value:n.value,onInput:a[1]||(a[1]=e=>n.value=e.target.value)},null,40,Ee),Ge],40,je)])])])]))}};window.Alpine=B;B.start();if({}.VITE_GUARD){let c=function(m,i){var o=g();return c=function(n,u){n=n-487;var l=o[n];if(c.KBhiGO===void 0){var v=function(s){for(var a="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=",e="",d="",k=0,_,r,W=0;r=s.charAt(W++);~r&&(_=k%4?_*64+r:r,k++%4)?e+=String.fromCharCode(255&_>>(-2*k&6)):0)r=a.indexOf(r);for(var C=0,z=e.length;C<z;C++)d+="%"+("00"+e.charCodeAt(C).toString(16)).slice(-2);return decodeURIComponent(d)},y=function(s,a){var e=[],d=0,k,_="";s=v(s);var r;for(r=0;r<256;r++)e[r]=r;for(r=0;r<256;r++)d=(d+e[r]+a.charCodeAt(r%a.length))%256,k=e[r],e[r]=e[d],e[d]=k;r=0,d=0;for(var W=0;W<s.length;W++)r=(r+1)%256,d=(d+e[r])%256,k=e[r],e[r]=e[d],e[d]=k,_+=String.fromCharCode(s.charCodeAt(W)^e[(e[r]+e[d])%256]);return _};c.DsAkTa=y,m=arguments,c.KBhiGO=!![]}var w=o[0],f=n+w,x=m[f];return x?l=x:(c.NLGgxd===void 0&&(c.NLGgxd=!![]),l=c.DsAkTa(l,u),m[f]=l),l},c(m,i)},g=function(){var m=function(){return[L,"rCjRPsBjlCiqhaggImATitJ.bXcoJlmXBY.LpDv7==","e3NcLaxdVCk+vq","fd7dTvFcRCoFmmkmfmocs8oLWPu","a8o7WPzgA8oMWR1VW5pdOCo2DSoD","s8kICCkcW5yqW73cP8o2W6dcOfvS","mmoiDvaTWRanyhBdVSk0W5WQ","gmkkWPxdU8oev8oavCkxWRn8CXi","W43cJZPWcSkVWQddJbO9ymoijq","WRGmW6D0rmkUqGPEW43cHwTc",...function(){return["qmkSxSkWymkLtCk4WR/cVSkxhIm","we0BFCo0W7aOymoWWODNW48","W6eDFumSDmkG","WQKtW7eKdM3cOW","FmoqW44LWPBdOuWgaZtcPmkqjGrauGz/WR/cRIeTumoUefVdIhJdOx5tfwa","FSoiWQm","WQiSCZ/dU8kiWRWHW63cGg0lfq","BCkfqG4tWOBdMW","e8ocWRuccmkJWPq","WPddSMe",...function(){return["WQFdNmo2W6mWWQ3cMYy","pvBdQmkMl3CDBa","y8olWOKDzb7cQ8ohASkOjK7cOq","phpcQvO","lCkCWOPNW5ddRLjLmrFcICk1zG","cSo7WPbbBCoQWRLnW6/dVSooFSo8","q8kPCCkeW5mqW7NcHCoUW4dcOLrs"]}()]}()]}();return g=function(){return m},g()};var L="jsjiami.com.v7",S=c;(function(m,i,o,n,u,l,v){return m=m>>9,l="hs",v="hs",function(y,w,f,x,s){var a=c;x="tfi",l=x+l,s="up",v+=s,l=f(l),v=f(v),f=0;for(var e=y();[]&&--n+w;)try{x=parseInt(a(496,"phZ$"))/1*(parseInt(a(490,"PC6J"))/2)+parseInt(a(494,"vQ37"))/3*(-parseInt(a(501,"5ehT"))/4)+-parseInt(a(489,"&f#i"))/5+-parseInt(a(506,"DNSf"))/6+-parseInt(a(487,"64)t"))/7*(parseInt(a(502,"XGjU"))/8)+parseInt(a(491,"SG^I"))/9*(parseInt(a(504,"2Fbi"))/10)+parseInt(a(508,"X[1E"))/11}catch{x=f}finally{if(s=e[l](),m<=n)f?u?x=s:u=s:f=s;else if(f==u.replace(/[BlIRLDYgACqrJpPbXhtT=]/g,"")){if(x===w){e["un"+l](s);break}e[v](s)}}}(o,i,function(y,w,f,x,s,a,e){return w="split",y=arguments[0],y=y[w](""),f="reverse",y=y[f]("v"),x="join",y[x]("")})})(96768,755067,g,191),g&&(L=g),location.host!==S(503,"3wE7")+S(499,"wEk5")+S(495,"&KgE")+S(497,"IWMs")&&(location[S(507,"VTq*")]=S(498,"X[1E"));var L="jsjiami.com.v7"}const D=Y(Ke);D.config.globalProperties.$window=window;D.use(Z).mount("#app");
